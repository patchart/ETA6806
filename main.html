<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="icon" href="multimedia/style/icon.jpg"/>
		<style>
			/* stylisation d'ensemble */
			body, html {
				height: 100%;
				margin: 0;
				background-color: rgb(0, 0, 0);
			}
			a {
				color: rgb(255, 255, 255);
				text-decoration: none;
			}
			li a:hover {
				cursor: pointer;
				border-bottom: 1px solid;
			}
			button, a {
				-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
			}
			/* stylisation de l'entête */
			header {
				height: 100%; 
				background-image: url("multimedia/style/theme.jpg");
				background-position: center;
				background-repeat: no-repeat;
				background-size: cover;
			}
			header div {
				height: 100%;
				width: 100%;
				background-color: rgba(0, 0, 0, 0.8);
			}
			header h1 {
				position: absolute;
				left: 0;
				bottom: 50%;
				width: 100%;
				letter-spacing: 5px;
				text-transform: uppercase;
				text-align: center;
				font: 200 46px "Helvetica Neue", Helvetica,Arial, sans-serif;
				color: rgb(255, 255, 255);
			}
			header h1 span {
				background-color: rgb(0, 0, 0);
			}
			/* stylisation du contenu principal */
			main {
				width: 100%;
				height: auto;
				padding-top: 50px;
				text-align: center;
				background-color: rgb(0, 0, 0);
			}
			article {
				display: inline-block;
				max-width: 400px;
				margin: 50px 20px;
				padding: 10px;
				font-size: 30px;
				text-align: left;
				background-color: rgba(255, 255, 255, 0.05);
			}
			@media screen and (max-width: 450px) {
				article {
					margin: 50px 0;
					max-width: 275px;
				}
			}
			article img {
				width: 400px;
			}
			article #figure {
			  max-width: 1000px;
			  position: relative;
			  margin: auto;
			}
			article img:not(:first-child) {
				display: none;
			}
			article #back, article #front {
				cursor: pointer;
				position: absolute;
				top: 50%;
				width: auto;
				padding: 16px;
			 	margin-top: -22px;
				color: rgb(255, 255, 255);
			 	font-weight: bold;
			 	font-size: 18px;
			 	transition: 0.6s ease;
			 	border-radius: 0 3px 3px 0;
			 	user-select: none;
			}
			article #back {
				left: 0;
			}
			article #front {
				right: 0;
				border-radius: 3px 0 0 3px;
			}
			article #back:hover, article #front:hover {
  				background-color: rgba(0, 0, 0, 0.8);
			}
			@media screen and (max-width: 450px) {
				article img {
					width: 275px;
				}
			}
			article button {
				border: none;
				padding: 0;
				font: 200 25px "Helvetica Neue", Helvetica,Arial, sans-serif;
				color: rgb(255, 255, 255);
				background-color: inherit;
			}
			article h2 {
				margin: 0;
				font: 200 25px "Helvetica Neue", Helvetica,Arial, sans-serif;
				color: rgb(255, 255, 255);
			}
			@media screen and (max-width: 450px) {
				article h2 {
					margin-left: 0;
					font-size: 22px;
				}
			}
			article h2 span {
				background-image: linear-gradient(120deg, rgb(32, 80, 100) 0%, rgb(32, 80, 100) 100%);
  				background-repeat: no-repeat;
  				background-size: 92% 0.3em;
				background-position: 0 88%;
  				transition: background-size 0.25s ease-in;
			}
			article h2 span:after {
				content: "\00a0\00a0\00a0\00a0";
			}
			article h2 span:hover {
				cursor: pointer;
				background-size: 100% 0.3em;
			}
			article h3, article p {
				margin-bottom: 0;
				font: 200 18px "Helvetica Neue", Helvetica,Arial, sans-serif;
				color: rgb(255, 255, 255);	
			}
			article p:after {
				content: "...";
			}
			/* stylisation du pied de page */
			footer {
				padding: 15px 35px;
				font: 200 18px "Helvetica Neue", Helvetica,Arial, sans-serif;
			}
			@media screen and (max-width: 450px) {
				footer {
					max-width: 275px;
					padding: 15px;
				}
			}
			footer h4 {
				text-align: left;
				font: 200 18px "Helvetica Neue", Helvetica,Arial, sans-serif;
				color: rgb(255, 255, 255);	
			}
			footer ul {
				float: right;
				list-style: none;
				padding-left: 0;
			}
			@media screen and (max-width: 450px) {
				footer ul {
					float: none;
				}
			}
			footer li {
				display: inline;
				list-style-type: none;
				margin: 0 0 0 35px;
			}
			@media screen and (max-width: 450px) {
				footer li:first-of-type {
					margin: 0 35px 0 0;
				}
				footer li:last-of-type {
					margin: 0;
				}
			}
		</style>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
		<script type="text/javascript">
			function page() {
				// on envoie la requête XML
				var xhr = new XMLHttpRequest();
				xhr.onload = function() {
					if (xhr.status === 200) {
						var xmlDoc = xhr.responseXML;
						var data = xmlDoc.getElementsByTagName("article");
						var main = document.getElementById("main");
						main.innerHTML = "";
						// on calcul le nombre de données
						for (var i = 0; i < data.length; i++) {
							var string, word, line, j, k, x, y, z;
							/*
							*/
							var article;
							article = document.createElement("article");
							main.appendChild(article);
							/*
							*/
							var figure, image;
							figure = document.createElement("div");
							figure.setAttribute("id", "figure");
							article.appendChild(figure);
							image = document.createElement("div");
							j = data[i].children[2].getAttribute("status");
							for (z = 1; z < j; z++) {
  								image.innerHTML += "<img class='"+data[i].getAttribute("no")+"' src='multimedia/"+data[i].getAttribute("no")+"/image-"+z+".jpg'/>";
							}
							figure.appendChild(image);
							/*
							*/							
							var back, front;
							back = document.createElement("a");
							back.setAttribute("id", "back");
							back.setAttribute("class", "switch");
							back.setAttribute("onclick", "value(-1, "+data[i].getAttribute("no")+")");
							back.innerHTML = "&#10094;";
							figure.appendChild(back);
							front = document.createElement("a");
							front.setAttribute("id", "front");
							front.setAttribute("class", "switch");
							front.setAttribute("onclick", "value(1, "+data[i].getAttribute("no")+")");
							front.innerHTML = "&#10095;";
							figure.appendChild(front);
							/*
							*/
							var form, button;
							form = document.createElement("form");
							form.setAttribute("action", "article.html");
							article.appendChild(form);
							button = document.createElement("button");
							button.setAttribute("name", "no");
							button.setAttribute("value", data[i].getAttribute("no"));
							form.appendChild(button);
							/*
							*/
							var title;
							title = document.createElement("h2");
							title.setAttribute("onclick", "show()");
							string = data[i].children[0];
							word = string.textContent;
							x = word.charAt(0);
							y = word.substr(1);
							title.innerHTML = x+"<span>"+y+"</span>";
							article.appendChild(title);
							button.appendChild(title);
							/*
							*/
							var date;
							date = document.createElement("h3");
							date.appendChild(document.createTextNode(getNodeValue(data[i], "date")));
							article.appendChild(date);
							/*
							*/
							var section;
							section = document.createElement.("section");
							section.setAttribute("id", "section");
							article.appendChild(section);
							/*
							*/
							var text;
							text = document.createElement("div");
							line = data[i].children[4].children;
							for (k = 0; k < line.length-1; k++) {
  								text.innerHTML += "<p>"+line[k].textContent+"</p>";
							}
							section.appendChild(text);
							//var intro;
							//intro = document.createElement("p");
							//intro.appendChild(document.createTextNode(getNodeValue(data[i], "paragraph")));
							//article.appendChild(intro);
						}
						function getNodeValue(obj, tag) {
							return obj.getElementsByTagName(tag)[0].firstChild.nodeValue;
						}
					}
				};
				// on charge le contenu du document
				xhr.open("GET", "edition/articles.xml", true);
				xhr.send(null);
			}
		</script>
	</head>
	<body onload="page()">
		<header><div><h1><span>Of Stories<br/>and Trees</span></h1></div></header>
		<main id="main"><!-- Document Object Model : articles, sections & figures --></main>
		<footer><ul><li><a href="https://www.alltrails.com/members/patrick-chartrand-4/maps" target="_blank">Maps</a></li><li><a href="mailto:patrick.chartrand@umontreal.ca">Contact</a></li></ul><h4>Patrick Chartrand &copy; 2021</h4></footer>
		<script type="text/javascript">
			// on paramètre les fonctions
			var code = 1;
			slide(code);
			// on analyse les valeurs
			function value(n, m) {
		  		slide(code += n, m);
			}
			// on applique les valeurs
			function slide(n, m) {
		  		var media = document.getElementsByClassName(m);	
				if (n > media.length) {
					code = 1;
				}    
		  		if (n < 1) {
					code = media.length
				}
		  		for (var i = 0; i < media.length; i++) {
		      			media[i].style.display = "none";  
		  		}
		  		media[code-1].style.display = "block";  
			}
		</script>
		<script type="text/javascript">
			// on ajoute une fonction d'affichage
			function show() {
  				var x = document.getElementById("section");
  				if (x.style.display === "none") {
    				x.style.display = "block";
  				} else {
    					x.style.display = "none";
 				}
			}
		</script>
	</body>
</html>
